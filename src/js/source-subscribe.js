(function(m,a,r,e,k){function c(a,b){b||(b={});this.form=a;this.input=b.input||a.querySelector('input[type="email"]');this.a=b.a||this.form.getAttribute("action");this.timeout=null;var d=this;this.form.addEventListener("submit",function(a){f(d);a.preventDefault();return!1},!1)}var g=RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");c.errorTimeout=1E3;c.callbacks={};c.counter=0;c.prototype.onError=function(){var a=this;a.form.classList.remove("error");setTimeout(function(){a.form.classList.add("error");setTimeout(function(){a.form.classList.remove("error")},c.errorTimeout)},0)};c.prototype.onSuccess=function(){this.form.classList.add("success")};function f(a){var b="_"+(c.counter++).toString(36),d=a.input.value;if(d&&g.test(d)){a.form.classList.add("loading");c.callbacks[b]=function(b){a.form.classList.remove("loading");if(-1<b.status.indexOf("subscribed"))a.onSuccess(b);else a.onError()};var e=document.createElement("script");e.onError=function(){a.form.classList.remove("loading");a.onError()};e.src=a.a+"?email="+encodeURIComponent(d)+"&callback=SourceSubscribe.callbacks."+b;document.getElementsByTagName("head")[0].appendChild(e)}else a.onError()}m.SourceSubscribe=c;!!m.jQuery&&(m.jQuery.fn.sourceSubscribe=function(){this.each(function(a,b){new SourceSubscribe(b)});return this;})})(window);
