<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>LESSHat is a buch of smart LESS mixins</title>

	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="reset.css">
	<link rel="stylesheet" href="style.css">

 	<link rel="stylesheet" type="text/css" href="lib/codemirror.css">
	<script type="text/javascript" src="lib/codemirror.js"></script>
	<script type="text/javascript" src="lib/less.js"></script>
	<!-- <link rel="stylesheet" type="text/less" href="lib/lesshat.less"> -->
	<script type="text/javascript" src="lib/less-1.3.0.js"></script>

	<!-- <script src="js/libs/modernizr-2.5.3.min.js"></script> -->
	<style type="text/css">
	.errline, .errline > * {
		background: #FFC3C3;
		color: red !important;
		/*font-weight: bold;*/
	}
	</style>
</head>
<body>
	<header>
		<h1><strong>LESS Hat</strong> – a bunch of smart Less mixins</h1>
		<p class="description">Why our mixins are smart? Because they are universal. To be first to
know about the updates Subscribe or Fork us on <a href="#" class="link">GitHub</a></p>
		<a href="#" class="download">Download LESS Hat 1.0</a>
		<p class="twitter"><img src="twitter.png" alt="Tweet about us!" width="18" height="14">If you like <a href="#" class="link">Tweet!</a></p>
	</header>
	<section>
		<ul id="menu">		
			<li><a class="active" href="#">.animation</a></li>
			<li><a href="#">.appearence</a></li>
			<li><a href="#">.backface–visibility</a></li>
			<li><a href="#">.background–clip</a></li>
			<li><a href="#">.background–origin</a></li>
			<li><a href="#">.background–size</a></li>
			<li><a href="#">.border–radius</a></li>
			<li><a href="#">.border–image</a></li>
			<li><a href="#">.box–shadow</a></li>
			<li><a href="#">.box–sizing</a></li>
			<li><a href="#">.columns</a></li>
			<li><a href="#">.font–face</a></li>
			<li><a href="#">.gradient</a></li>
			<li><a href="#">.opacity</a></li>
			<li><a class="red" data-text="EN ROUTE" href="#">.perspective</a></li>
			<li><a href="#">.size</a></li>
			<li><a href="#">.transform</a></li>
			<li><a class="green" data-text="COMPLETE" href="#">.translate</a></li>
			<li><a href="#">.scale</a></li>
		</ul>
		<div id="main">
			<div id="gradient-hack"></div>
			<article>
				<h2>.shadow</h2>
				<p class="detail"><strong>CoffeeScript is a little language</strong> that compiles into JavaScript. Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>
				<div class="border-radius-hack">
					<table class="compare">
						<thead>
							<tr>
								<th>Gradient</th>
								<th>LESS Hat</th>
								<th>Compass</th>
								<th>Less Elements</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Global</td>
								<td></td>
								<td class="no"></td>
								<td></td>
							</tr>
							<tr>
								<td>Unlimited</td>
								<td class="no"></td>
								<td></td>
								<td></td>
							</tr>
							<tr>
								<td>Turbo brtual long text</td>
								<td class="no"></td>
								<td></td>
								<td class="no"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<p class="detail"><strong>CoffeeScript is a little language that compiles into JavaScript.</strong> Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>

				<div class="code clearfix">
					<textarea cols="30" rows="10" data-css="css">.compare{
	text-align: center;
	thead{
		font-weight: 700;
		tr{
			background-color: #f5f5f5;
		}
	}
	tbody{
		tr{
			&:nth-child(even){
				background-color: #f5f5f5;
			}
			td{
				background: url(yes.png) no-repeat center center;
				&:first-of-type{
					background: none;
				}
				&.no{
					background: url(no.png) no-repeat center center;
				}
			}
		}
	}
}</textarea>
					<code id="css">.compare {<br>  text-align: center;<br>}<br>.compare thead {<br>  font-weight: 700;<br>}<br>.compare thead tr {<br>  background-color: #f5f5f5;<br>}<br>.compare tbody tr:nth-child(even) {<br>  background-color: #f5f5f5;<br>}<br>.compare tbody tr td {<br>  background: url(yes.png) no-repeat center center;<br>}<br>.compare tbody tr td:first-of-type {<br>  background: none;<br>}<br>.compare tbody tr td.no {<br>  background: url(no.png) no-repeat center center;<br>}<br></code>
				</div>

				
			</article>

			<article>
				<h2>.shadow</h2>
				<p class="detail"><strong>CoffeeScript is a little language</strong> that compiles into JavaScript. Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>
				<div class="border-radius-hack">
					<table class="compare">
						<thead>
							<tr>
								<th>Gradient</th>
								<th>LESS Hat</th>
								<th>Compass</th>
								<th>Less Elements</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Global</td>
								<td></td>
								<td class="no"></td>
								<td></td>
							</tr>
							<tr>
								<td>Unlimited</td>
								<td class="no"></td>
								<td></td>
								<td></td>
							</tr>
							<tr>
								<td>Turbo brtual long text</td>
								<td class="no"></td>
								<td></td>
								<td class="no"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<p class="detail"><strong>CoffeeScript is a little language that compiles into JavaScript.</strong> Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>

				<div class="code clearfix">
					<textarea id="" cols="30" rows="10" data-css="css2">
.shadow(@arguments);

.shadow(~"0 1px 10px #000, inset 0 -2px 5px red");

result: -webkit-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
-moz-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
				</textarea>
				<code id="css2">.shadow(@arguments);

.shadow(~"0 1px 10px #000, inset 0 -2px 5px red");

result: -webkit-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
-moz-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;</code>
				</div>

				
			</article>

			<article>
				<h2>.shadow</h2>
				<p class="detail"><strong>CoffeeScript is a little language</strong> that compiles into JavaScript. Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>
				<div class="border-radius-hack">
					<table class="compare">
						<thead>
							<tr>
								<th>Gradient</th>
								<th>LESS Hat</th>
								<th>Compass</th>
								<th>Less Elements</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Global</td>
								<td></td>
								<td class="no"></td>
								<td></td>
							</tr>
							<tr>
								<td>Unlimited</td>
								<td class="no"></td>
								<td></td>
								<td></td>
							</tr>
							<tr>
								<td>Turbo brtual long text</td>
								<td class="no"></td>
								<td></td>
								<td class="no"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<p class="detail"><strong>CoffeeScript is a little language that compiles into JavaScript.</strong> Underneath all those awkward braces and semicolons, JavaScript has always had a gorgeous object model at its heart. CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>

				<div class="code clearfix">
					<textarea id="" cols="30" rows="10" data-css="css3">
.shadow(@arguments);

.shadow(~"0 1px 10px #000, inset 0 -2px 5px red");

result: -webkit-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
-moz-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
				</textarea>
				<code id="css3">.shadow(@arguments);

.shadow(~"0 1px 10px #000, inset 0 -2px 5px red");

result: -webkit-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
-moz-box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;
box-shadow: 0 1px 10px #000, inset 0 -2px 5px red;</code>
				</div>

				
			</article>
		</div>
	</section>

	<script type="text/javascript">
	var debounce = function(func, wait, immediate) {
    var timeout;
    return function() {
      var context = this, args = arguments;
      var later = function() {
        timeout = null;
        if (!immediate) func.apply(context, args);
      };
      if (immediate && !timeout) func.apply(context, args);
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  };
 	var throttle = function(func, wait) {
    var context, args, timeout, throttling, more, result;
    var whenDone = debounce(function(){ more = throttling = false; }, wait);
    return function() {
      context = this; args = arguments;
      var later = function() {
        timeout = null;
        if (more) func.apply(context, args);
        whenDone();
      };
      if (!timeout) timeout = setTimeout(later, wait);
      if (throttling) {
        more = true;
      } else {
        result = func.apply(context, args);
      }
      whenDone();
      throttling = true;
      return result;
    };
  };
	</script>

	<script type="text/javascript" defer>
	var lesshat = document.querySelectorAll('textarea[data-css]');
	var css = document.getElementById('css');
	var parser = new less.Parser;
	var refresh = function(less, cssElement, ok, err)
	{
		// console.log('change', e, lesshat.value);
		parser.parse('@import "lib/lesshat.less";\n'+ less, function(e, tree) {
			if (!e) {
				var code = tree.toCSS();
				cssElement.innerText = code;
				console.log('code', code);
				// style.innerText = code;
				ok();
			}
			else {
				console.log('e', e);
				err(e);
			}
		});
	};
	Array.prototype.forEach.call(lesshat, function(l)
	{
		var lastLine = null;
		var editor = CodeMirror.fromTextArea(l, {
			// 'onChange': refresh,
			'onChange': throttle(function(e) {
				refresh(
					e.getValue(),
					l.dataset['css'] && document.getElementById(l.dataset['css']),
					function(e) {
						if (lastLine) {
							editor.setLineClass(lastLine, '');
							lastLine = null;
						}		
					},
					function(e) {
						lastLine = e.line - 1;
						lastLine = lastLine >= 0 ? lastLine : 0;
						editor.setLineClass(lastLine, 'errline');
					});
				editor.refresh();
			}, 100),
			'lineWrapping': true,
			'tabSize': 2
		});
	});
	</script>

	<script type="text/javascript">
		var menu = document.getElementById('menu');
		var stopY = menu.offsetTop - 25;
        var gradient = document.getElementById('gradient-hack');
		window.onscroll = function (oEvent) {
			var topY = window.pageYOffset;
			if (topY >= stopY) {
				menu.style.position='fixed';
				gradient.style.position='fixed';
				gradient.style.top='0';
			}
			else
			{
				menu.style.position='static';
				gradient.style.position='absolute';
				gradient.style.top='-25px';
			}
		}
	</script>

</body>
</html>